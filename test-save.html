<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Save Settings</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div class="container mx-auto p-8">
        <h1 class="text-3xl font-bold text-green-600 mb-6">ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h1>
        
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">Ø§Ø®ØªØ¨Ø§Ø± Ø­ÙØ¸ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø®Ø·ÙˆØ·</h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Ø­Ø¬Ù… Ø®Ø· Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
                    <select id="heroTitle" class="w-full border p-2 rounded">
                        <option value="text-2xl">ØµØºÙŠØ± (text-2xl)</option>
                        <option value="text-3xl">Ù…ØªÙˆØ³Ø· (text-3xl)</option>
                        <option value="text-4xl" selected>ÙƒØ¨ÙŠØ± (text-4xl)</option>
                        <option value="text-5xl">ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ (text-5xl)</option>
                        <option value="text-6xl">Ø¶Ø®Ù… (text-6xl)</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Ø­Ø¬Ù… Ø§Ù„Ø®Ø· Ø§Ù„ÙØ±Ø¹ÙŠ</label>
                    <select id="heroSubtitle" class="w-full border p-2 rounded">
                        <option value="text-sm">ØµØºÙŠØ± Ø¬Ø¯Ø§Ù‹ (text-sm)</option>
                        <option value="text-base">ØµØºÙŠØ± (text-base)</option>
                        <option value="text-lg">Ù…ØªÙˆØ³Ø· (text-lg)</option>
                        <option value="text-xl" selected>ÙƒØ¨ÙŠØ± (text-xl)</option>
                        <option value="text-2xl">ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹ (text-2xl)</option>
                    </select>
                </div>
                
                <button onclick="testSave()" class="bg-green-500 text-white px-6 py-2 rounded hover:bg-green-600">
                    ğŸ’¾ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø­ÙØ¸
                </button>
                <button onclick="testLoad()" class="bg-blue-500 text-white px-6 py-2 rounded hover:bg-blue-600 ml-2">
                    ğŸ“¥ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                </button>
            </div>
        </div>
        
        <div id="result" class="bg-gray-100 p-4 rounded-lg"></div>
        
        <div class="mt-6 bg-yellow-50 p-4 rounded-lg">
            <h3 class="font-semibold mb-2">ğŸ” Console Logs</h3>
            <p class="text-sm">Ø§ÙØªØ­ Console (F12) Ù„Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„</p>
        </div>
    </div>
    
    <script>
        async function testSave() {
            const result = document.getElementById('result');
            result.innerHTML = '<div class="text-blue-600">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...</div>';
            
            try {
                const fontSizes = {
                    heroTitle: document.getElementById('heroTitle').value,
                    heroSubtitle: document.getElementById('heroSubtitle').value,
                    servicesTitle: 'text-3xl',
                    servicesSubtitle: 'text-lg',
                    teamTitle: 'text-2xl'
                };
                
                console.log('ğŸ”§ [Test] Saving font sizes:', fontSizes);
                
                const response = await fetch('/api/settings/save', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        font_sizes: fontSizes
                    })
                });
                
                const data = await response.json();
                console.log('ğŸ“¦ [Test] Save response:', data);
                
                if (data.ok) {
                    result.innerHTML = `
                        <div class="text-green-600">
                            âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­!
                            <br><small>${JSON.stringify(data.data, null, 2)}</small>
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div class="text-red-600">
                            âŒ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸: ${data.error}
                            <br><small>${JSON.stringify(data, null, 2)}</small>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('âŒ [Test] Save error:', error);
                result.innerHTML = `
                    <div class="text-red-600">
                        âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸: ${error.message}
                    </div>
                `;
            }
        }
        
        async function testLoad() {
            const result = document.getElementById('result');
            result.innerHTML = '<div class="text-blue-600">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';
            
            try {
                console.log('ğŸ”§ [Test] Loading settings...');
                
                const response = await fetch('/api/settings/get');
                const data = await response.json();
                
                console.log('ğŸ“¦ [Test] Load response:', data);
                
                if (data.ok) {
                    const fontSizes = data.data.font_sizes || {};
                    console.log('ğŸ” [Test] Font sizes:', fontSizes);
                    
                    // Update UI
                    if (fontSizes.heroTitle) document.getElementById('heroTitle').value = fontSizes.heroTitle;
                    if (fontSizes.heroSubtitle) document.getElementById('heroSubtitle').value = fontSizes.heroSubtitle;
                    
                    result.innerHTML = `
                        <div class="text-green-600">
                            âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!
                            <br><small>Font Sizes: ${JSON.stringify(fontSizes, null, 2)}</small>
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div class="text-red-600">
                            âŒ ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${data.error}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('âŒ [Test] Load error:', error);
                result.innerHTML = `
                    <div class="text-red-600">
                        âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${error.message}
                    </div>
                `;
            }
        }
        
        // Test load on page load
        window.addEventListener('load', testLoad);
    </script>
</body>
</html>
