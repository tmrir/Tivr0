<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ­Ø¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .log-entry { font-family: 'Courier New', monospace; font-size: 12px; }
        .data-item { transition: all 0.3s ease; }
        .data-item:hover { transform: translateX(5px); }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div class="container mx-auto p-8 max-w-6xl">
        <h1 class="text-3xl font-bold text-red-600 mb-6">ğŸ” Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ­Ø¯</h1>
        
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">Ø§Ù„Ù‡Ø¯Ù Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h2>
            <p class="mb-4">Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© ØªÙ‚Ø±Ø£ Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ ÙŠØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….</p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="bg-blue-50 p-4 rounded">
                    <h3 class="font-semibold text-blue-800 mb-2">ğŸ“± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
                    <p class="text-sm">ØªØ³ØªØ®Ø¯Ù… settingsService.getSettings()</p>
                    <p class="text-sm">ØªÙ‚Ø±Ø£ Ù…Ù† localStorage + Supabase + defaults</p>
                </div>
                <div class="bg-green-50 p-4 rounded">
                    <h3 class="font-semibold text-green-800 mb-2">ğŸŒ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©</h3>
                    <p class="text-sm">ØªØ³ØªØ®Ø¯Ù… db.settings.get()</p>
                    <p class="text-sm">Ø§Ù„Ø¢Ù† ØªØ³ØªØ®Ø¯Ù… Ù†ÙØ³ settingsService.getSettings()</p>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
            <!-- Test Controls -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl font-semibold mb-4">ğŸ›ï¸ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
                <div class="space-y-3">
                    <button onclick="testDataSources()" class="w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                        ğŸ” Ù…Ù‚Ø§Ø±Ù†Ø© Ù…ØµØ§Ø¯Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button onclick="testLocalStorage()" class="w-full bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
                        ğŸ“± ÙØ­Øµ LocalStorage
                    </button>
                    <button onclick="simulateAdminChange()" class="w-full bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">
                        âš™ï¸ Ù…Ø­Ø§ÙƒØ§Ø© ØªØºÙŠÙŠØ± Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                    </button>
                    <button onclick="triggerFrontendUpdate()" class="w-full bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                        ğŸŒ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ©
                    </button>
                    <button onclick="clearAllData()" class="w-full bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                        ğŸ—‘ï¸ Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                </div>
            </div>
            
            <!-- Live Data Display -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h2 class="text-xl font-semibold mb-4">ğŸ“Š Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h2>
                <div id="liveData" class="space-y-2 max-h-64 overflow-y-auto">
                    <p class="text-gray-500">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
                </div>
            </div>
            
            <!-- Console Log -->
            <div class="bg-gray-900 text-white p-4 rounded-lg">
                <h3 class="font-semibold mb-2 flex justify-between items-center">
                    <span>ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</span>
                    <button onclick="clearConsole()" class="text-xs bg-red-600 px-2 py-1 rounded">Ù…Ø³Ø­</button>
                </h3>
                <div id="consoleOutput" class="log-entry max-h-64 overflow-y-auto whitespace-pre-wrap"></div>
            </div>
        </div>

        <!-- Data Comparison -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">ğŸ” Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="font-semibold mb-3 text-blue-600">Ø¨ÙŠØ§Ù†Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©)</h3>
                    <div id="adminData" class="bg-gray-50 p-4 rounded text-sm max-h-48 overflow-y-auto">
                        <p class="text-gray-500">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold mb-3 text-green-600">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (Ø§Ù„ÙØ¹Ù„ÙŠØ©)</h3>
                    <div id="frontendData" class="bg-gray-50 p-4 rounded text-sm max-h-48 overflow-y-auto">
                        <p class="text-gray-500">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
                    </div>
                </div>
            </div>
            <div id="comparisonResult" class="mt-4 p-4 rounded text-center font-semibold"></div>
        </div>

        <!-- Real-time Updates -->
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-xl font-semibold mb-4">ğŸ”„ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„ÙÙˆØ±ÙŠØ©</h2>
            <div class="bg-yellow-50 border border-yellow-200 p-4 rounded">
                <p class="text-sm text-yellow-800 mb-2">
                    <strong>Ù…Ù„Ø§Ø­Ø¸Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØ­Ø§ÙƒÙŠ ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙØ¹Ù„ÙŠØŒ ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….
                </p>
                <div class="flex gap-4">
                    <button onclick="startAutoTest()" class="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600">
                        â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
                    </button>
                    <button onclick="stopAutoTest()" class="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
                        â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
                    </button>
                </div>
            </div>
            <div id="autoTestStatus" class="mt-4 text-center"></div>
        </div>
    </div>
    
    <script>
        // Console override
        const originalLog = console.log;
        const consoleOutput = document.getElementById('consoleOutput');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#4ade80' : '#60a5fa';
            const icon = type === 'error' ? 'âŒ' : type === 'success' ? 'âœ…' : 'â„¹ï¸';
            consoleOutput.innerHTML += `<span style="color: ${color}">[${timestamp}] ${icon} ${message}</span>\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };

        function clearConsole() {
            consoleOutput.innerHTML = '';
        }

        // Test functions
        async function testDataSources() {
            addToConsole('ğŸ” Starting data sources comparison...', 'log');
            
            try {
                // Simulate admin panel data (settingsService)
                const adminData = await simulateSettingsService();
                document.getElementById('adminData').innerHTML = formatDataForDisplay(adminData);
                
                // Simulate frontend data (db.settings)
                const frontendData = await simulateDbSettings();
                document.getElementById('frontendData').innerHTML = formatDataForDisplay(frontendData);
                
                // Compare data
                const isMatch = JSON.stringify(adminData) === JSON.stringify(frontendData);
                const resultDiv = document.getElementById('comparisonResult');
                
                if (isMatch) {
                    resultDiv.innerHTML = '<div class="bg-green-100 text-green-800 p-3 rounded">âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ·Ø§Ø¨Ù‚Ø©! Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ØªÙ‚Ø±Ø£ Ù†ÙØ³ Ù…ØµØ¯Ø± Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ….</div>';
                    addToConsole('âœ… Data sources match perfectly!', 'success');
                } else {
                    resultDiv.innerHTML = '<div class="bg-red-100 text-red-800 p-3 rounded">âŒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©! Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ ØªØ¯ÙÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.</div>';
                    addToConsole('âŒ Data sources do not match!', 'error');
                }
                
                updateLiveData(adminData);
            } catch (error) {
                addToConsole(`Error in data comparison: ${error.message}`, 'error');
            }
        }

        async function simulateSettingsService() {
            // Simulate settingsService.getSettings() with localStorage + defaults
            const localSettings = localStorage.getItem('tivro_settings');
            if (localSettings) {
                return JSON.parse(localSettings);
            }
            
            // Return default settings if no localStorage
            return {
                homeSections: {
                    heroTitle: { ar: 'Ù†Ø­ÙˆÙ„ Ø£ÙÙƒØ§Ø±Ùƒ Ø¥Ù„Ù‰ ÙˆØ§Ù‚Ø¹ Ø±Ù‚Ù…ÙŠ', en: 'We Turn Your Ideas into Digital Reality' },
                    heroSubtitle: { ar: 'ÙˆÙƒØ§Ù„Ø© ØªØ³ÙˆÙŠÙ‚ Ø±Ù‚Ù…ÙŠ Ù…ØªÙƒØ§Ù…Ù„Ø©', en: 'A full-service digital marketing agency' },
                    servicesTitle: { ar: 'Ø®Ø¯Ù…Ø§ØªÙ†Ø§', en: 'Our Services' },
                    servicesSubtitle: { ar: 'Ø­Ù„ÙˆÙ„Ø§Ù‹ Ø±Ù‚Ù…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©', en: 'Integrated digital solutions' }
                },
                socialLinks: [
                    { platform: 'Twitter', url: 'https://twitter.com/tivro' },
                    { platform: 'Linkedin', url: 'https://linkedin.com/company/tivro' }
                ]
            };
        }

        async function simulateDbSettings() {
            // This should now use the same settingsService
            return await simulateSettingsService();
        }

        function formatDataForDisplay(data) {
            if (!data) return '<p class="text-red-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>';
            
            let html = '<div class="space-y-2">';
            
            if (data.homeSections) {
                html += '<div class="data-item"><strong>Hero Title (AR):</strong> ' + (data.homeSections.heroTitle?.ar || 'N/A') + '</div>';
                html += '<div class="data-item"><strong>Hero Subtitle (AR):</strong> ' + (data.homeSections.heroSubtitle?.ar || 'N/A') + '</div>';
                html += '<div class="data-item"><strong>Services Title (AR):</strong> ' + (data.homeSections.servicesTitle?.ar || 'N/A') + '</div>';
            }
            
            if (data.socialLinks) {
                html += '<div class="data-item"><strong>Social Links:</strong> ' + data.socialLinks.length + ' links</div>';
                data.socialLinks.forEach(link => {
                    html += '<div class="data-item ml-4">- ' + link.platform + ': ' + link.url + '</div>';
                });
            }
            
            html += '</div>';
            return html;
        }

        function updateLiveData(data) {
            const liveDataDiv = document.getElementById('liveData');
            if (!data) {
                liveDataDiv.innerHTML = '<p class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>';
                return;
            }
            
            let html = '<div class="space-y-3">';
            html += '<div class="bg-blue-50 p-3 rounded"><strong>ğŸ“Š Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:</strong> ' + new Date().toLocaleTimeString() + '</div>';
            
            if (data.homeSections) {
                html += '<div class="bg-green-50 p-3 rounded"><strong>ğŸ  Hero Section:</strong></div>';
                html += '<div class="ml-4 text-sm">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ' + (data.homeSections.heroTitle?.ar || 'N/A') + '</div>';
                html += '<div class="ml-4 text-sm">Ø§Ù„ÙˆØµÙ: ' + (data.homeSections.heroSubtitle?.ar || 'N/A') + '</div>';
            }
            
            html += '</div>';
            liveDataDiv.innerHTML = html;
        }

        function testLocalStorage() {
            const settings = localStorage.getItem('tivro_settings');
            const timestamp = localStorage.getItem('tivro_settings_timestamp');
            
            addToConsole('ğŸ“± Checking LocalStorage...', 'log');
            
            if (settings) {
                const parsed = JSON.parse(settings);
                const age = timestamp ? Date.now() - parseInt(timestamp) : 0;
                const ageMinutes = (age / (1000 * 60)).toFixed(1);
                
                addToConsole(`âœ… Found LocalStorage data, age: ${ageMinutes} minutes`, 'success');
                addToConsole(`ğŸ“Š Social links count: ${parsed.socialLinks?.length || 0}`, 'log');
                updateLiveData(parsed);
            } else {
                addToConsole('âŒ No LocalStorage data found', 'error');
            }
        }

        function simulateAdminChange() {
            addToConsole('âš™ï¸ Simulating admin panel change...', 'log');
            
            // Create new settings
            const newSettings = {
                homeSections: {
                    heroTitle: { ar: 'ğŸš€ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…!', en: 'ğŸš€ Title updated from admin panel!' },
                    heroSubtitle: { ar: 'ğŸ“ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØµÙ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…', en: 'ğŸ“ Subtitle updated from admin panel' },
                    servicesTitle: { ar: 'Ø®Ø¯Ù…Ø§ØªÙ†Ø§ Ø§Ù„Ù…Ø­Ø¯Ø«Ø©', en: 'Our Updated Services' },
                    servicesSubtitle: { ar: 'Ø­Ù„ÙˆÙ„ Ù…Ø¨ØªÙƒØ±Ø© ÙˆÙ…Ø­Ø¯Ø«Ø©', en: 'Innovative and updated solutions' }
                },
                socialLinks: [
                    { platform: 'Twitter', url: 'https://twitter.com/tivro-updated' },
                    { platform: 'Linkedin', url: 'https://linkedin.com/company/tivro-updated' },
                    { platform: 'Instagram', url: 'https://instagram.com/tivro-updated' }
                ],
                lastUpdated: Date.now()
            };
            
            // Save to localStorage (simulating admin save)
            localStorage.setItem('tivro_settings', JSON.stringify(newSettings));
            localStorage.setItem('tivro_settings_timestamp', Date.now().toString());
            
            // Trigger settingsUpdated event
            window.dispatchEvent(new CustomEvent('settingsUpdated', { detail: newSettings }));
            
            addToConsole('âœ… Admin change simulated and saved', 'success');
            updateLiveData(newSettings);
            
            // Update displays
            document.getElementById('adminData').innerHTML = formatDataForDisplay(newSettings);
        }

        function triggerFrontendUpdate() {
            addToConsole('ğŸŒ Triggering frontend update...', 'log');
            
            // Simulate the frontend receiving the settingsUpdated event
            const handleSettingsUpdate = (event) => {
                addToConsole('ğŸ”„ Frontend received settings update!', 'success');
                const newSettings = event.detail;
                document.getElementById('frontendData').innerHTML = formatDataForDisplay(newSettings);
                updateLiveData(newSettings);
                
                // Check if data matches
                const adminData = document.getElementById('adminData').textContent;
                const frontendData = document.getElementById('frontendData').textContent;
                const isMatch = adminData === frontendData;
                
                const resultDiv = document.getElementById('comparisonResult');
                if (isMatch) {
                    resultDiv.innerHTML = '<div class="bg-green-100 text-green-800 p-3 rounded">âœ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ·Ø§Ø¨Ù‚Ø© Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«!</div>';
                } else {
                    resultDiv.innerHTML = '<div class="bg-yellow-100 text-yellow-800 p-3 rounded">âš ï¸ ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ÙˆÙ„ÙƒÙ† Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ù„Ù…Ø²Ø§Ù…Ù†Ø© ÙŠØ¯ÙˆÙŠØ©.</div>';
                }
            };
            
            window.addEventListener('settingsUpdated', handleSettingsUpdate);
            
            // Trigger the event
            const currentSettings = localStorage.getItem('tivro_settings');
            if (currentSettings) {
                const parsed = JSON.parse(currentSettings);
                window.dispatchEvent(new CustomEvent('settingsUpdated', { detail: parsed }));
            }
        }

        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) {
                localStorage.removeItem('tivro_settings');
                localStorage.removeItem('tivro_settings_timestamp');
                
                addToConsole('ğŸ—‘ï¸ All data cleared', 'log');
                
                // Clear displays
                document.getElementById('adminData').innerHTML = '<p class="text-gray-500">ØªÙ… Ø§Ù„Ù…Ø³Ø­</p>';
                document.getElementById('frontendData').innerHTML = '<p class="text-gray-500">ØªÙ… Ø§Ù„Ù…Ø³Ø­</p>';
                document.getElementById('liveData').innerHTML = '<p class="text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</p>';
                document.getElementById('comparisonResult').innerHTML = '';
            }
        }

        let autoTestInterval = null;

        function startAutoTest() {
            if (autoTestInterval) return;
            
            addToConsole('â–¶ï¸ Starting auto test...', 'log');
            document.getElementById('autoTestStatus').innerHTML = '<div class="bg-yellow-100 text-yellow-800 p-3 rounded">â³ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¬Ø§Ø±ÙŠ...</div>';
            
            let counter = 0;
            autoTestInterval = setInterval(() => {
                counter++;
                
                // Simulate admin change
                const testSettings = {
                    homeSections: {
                        heroTitle: { ar: `ğŸ”„ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ #${counter}`, en: `ğŸ”„ Auto Update #${counter}` },
                        heroSubtitle: { ar: `Ù‡Ø°Ø§ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø±Ù‚Ù… ${counter}`, en: `This is auto update #${counter}` }
                    },
                    socialLinks: [
                        { platform: 'Test', url: `https://test.com/update-${counter}` }
                    ],
                    testCounter: counter
                };
                
                localStorage.setItem('tivro_settings', JSON.stringify(testSettings));
                localStorage.setItem('tivro_settings_timestamp', Date.now().toString());
                
                // Trigger update
                window.dispatchEvent(new CustomEvent('settingsUpdated', { detail: testSettings }));
                
                updateLiveData(testSettings);
                addToConsole(`ğŸ”„ Auto test #${counter} completed`, 'log');
                
                // Update displays
                document.getElementById('adminData').innerHTML = formatDataForDisplay(testSettings);
                document.getElementById('frontendData').innerHTML = formatDataForDisplay(testSettings);
                
                // Stop after 10 iterations
                if (counter >= 10) {
                    stopAutoTest();
                    document.getElementById('autoTestStatus').innerHTML = '<div class="bg-green-100 text-green-800 p-3 rounded">âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ù†Ø¬Ø§Ø­!</div>';
                }
            }, 2000);
        }

        function stopAutoTest() {
            if (autoTestInterval) {
                clearInterval(autoTestInterval);
                autoTestInterval = null;
                addToConsole('â¹ï¸ Auto test stopped', 'log');
                document.getElementById('autoTestStatus').innerHTML = '<div class="bg-gray-100 text-gray-800 p-3 rounded">â¹ï¸ ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</div>';
            }
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            addToConsole('ğŸ”§ Test page loaded successfully', 'success');
            testDataSources();
        });
    </script>
</body>
</html>
